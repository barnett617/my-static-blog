<!doctype html><html lang=zh dir=ltr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>webpack学习笔记 | Wilson's Blog</title>
<meta name=keywords content="webpack"><meta name=description content="关于 Webpack 基础使用的整理"><meta name=author content><link rel=canonical href=https://barnett617.github.io/wilson-blog/posts/2018-01-17-webpack-basic/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/wilson-blog/assets/css/stylesheet.659e049f7d2efb8a004f34ec6fb29b526477a978c7fb695f4c301f8864c325c5.css integrity="sha256-ZZ4En30u+4oATzTsb7KbUmR3qXjH+2lfTDAfiGTDJcU=" rel="preload stylesheet" as=style><link rel=icon href=https://barnett617.github.io/wilson-blog/favicon_io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://barnett617.github.io/wilson-blog/favicon_io/favicon16x16.png><link rel=icon type=image/png sizes=32x32 href=https://barnett617.github.io/wilson-blog/favicon_io/favicon32x32.png><link rel=apple-touch-icon href=https://barnett617.github.io/wilson-blog/favicon_io/apple-touch-icon.png><link rel=mask-icon href=https://barnett617.github.io/wilson-blog/favicon_io/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://barnett617.github.io/wilson-blog/posts/2018-01-17-webpack-basic/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="webpack学习笔记"><meta property="og:description" content="关于 Webpack 基础使用的整理"><meta property="og:type" content="article"><meta property="og:url" content="https://barnett617.github.io/wilson-blog/posts/2018-01-17-webpack-basic/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-01-17T11:41:10+00:00"><meta property="article:modified_time" content="2018-01-17T11:41:10+00:00"><meta property="og:site_name" content="Wilson's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="webpack学习笔记"><meta name=twitter:description content="关于 Webpack 基础使用的整理"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://barnett617.github.io/wilson-blog/posts/"},{"@type":"ListItem","position":2,"name":"webpack学习笔记","item":"https://barnett617.github.io/wilson-blog/posts/2018-01-17-webpack-basic/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"webpack学习笔记","name":"webpack学习笔记","description":"关于 Webpack 基础使用的整理\n","keywords":["webpack"],"articleBody":"关于 Webpack 基础使用的整理\n背景 网站由网页模式进化成 Webapp 模式\n网站运行在高级浏览器中，使用 HTML5、CSS3、ES6 等新技术\nwebapp 通常是单页面应用（每一个视图通过异步方式加载，导致页面初始化和使用过程会加载更多的 js 代码）\n前端开发基于多语言、多层次编码和组织工作，交付基于浏览器，需要保证代码和资源在浏览器端快速优雅的加载和更新，亟需模块化系统\n传统方式 entry.js\ndocument.write('Hello world') 编译 entry.js 并打包到 bundle.js\nwebpack entry.js bundle.js 访问 index.html 即可\n添加模块 module.js\nmodule.exports = 'It works from module.js.' entry.js\ndocument.write('Hello world') document.write(require('./module.js')) 打包\nwebpack entry.js bundle.js 分析 webpack 分析入口文件，解析包含依赖关系的各个文件\n这些文件（模块）都打包到 bundle.js\nwebpack 给每个模块分配一个唯一 ID 并通过 ID 索引和访问模块\n页面启动时先执行 entry.js，其他模块在运行 require 时再执行\nloader 背景 webpack 本身只能处理 js 模块，其他类型文件需要 loader 进行转换\nloader 本身一个函数，接受源文件为参数，返回转换结果\nloader 特性 可通过管道方式链式调用，每个 loader 可将资源转换成任意格式并传递给下一个 loader，最后一个 loader 必须返回 js\n可同步或异步执行\n运行在 node.js 环境中，可做任何可能的事情\n可接受参数，以此传递配置给 loader\n可通过文件拓展名（或正则表达式）绑定给不同类型的文件\n可通过 npm 发布和安装\n除了通过 package.json 和 main 指定，通常的模块也可导出一个 loader 来使用\n可访问配置\n支持插件\n可分发出附件的任意文件\nloader 命名 一般为 xxx-loader，xxx 为转换的功能，例如 json-loader\n引用 loader 时可通过全名（json-loader）或短名(json)\n命名规则和搜索优先级顺序在 resolveLoader.moduleTemplates API 中定义\nDefault: [\"*-webpack-loader\", \"*-web-loader\", \"*-loader\", \"*\"] 添加方式 在 require()引用模块时添加\nwebpack 全局配置中绑定\n命令行方式\n场景 在页面引入一个 CSS 文件 style.css\nbody { background: yellow; } entry.js\n// 载入style.css require(\"!style-loader!css-loader!./style.css\") document.write('Hello world.') document.write(require('./module.js')) 处理 将 style.css 看作一个模块\n用 css-loader 读取\n用 style-loader 把它插入页面\n安装 loader npm install css-loader style-loader 即可\n改进 根据模块类型（拓展名）自动绑定需要的 loader，避免每次 require CSS 文件时都写 loader 前缀\nentry.js\nrequire(\"!style!css!./style.css\") 修改为\nrequire(\"./style.css\") 打包 webpack entry.js bundle.js --module-bind \"css=style-loader!css-loader\" Bingo! 效果一样\n只不过是在打包环节根据模块类型绑定需要的 loader，不需要在 require 中写 loader 前缀\n配置文件 上面通过在命令行在执行 webpack 时传入参数，可通过指定配置文件来执行\n默认搜索当前目录 webpack.config.js\n该文件是一个 node.js 模块，返回一个 json 格式的配置信息对象\n可通过–config 选项指定配置文件\n具体操作 创建 package.json 添加 webpack 需要的依赖\n{ \"name\": \"my-webpack\", \"version\": \"1.0.0\", \"description\": \"A simple webpack example\", \"main\": \"bundle.js\", \"scripts\": { \"test\": \"echo \\\"Error: no test specified\\\" \u0026\u0026 exit 1\" }, \"keywords\": [ \"webpack\" ], \"author\": \"igam\", \"license\": \"MIT\", \"devDependencies\": { \"css-loader\": \"^0.21.0\", \"style-loader\": \"^0.13.0\", \"webpack\": \"^1.12.2\" } } 根据 package.json 下载依赖模块\nnpm install 创建配置文件 webpack.config.js\nvar webpack = require('webpack') module.exports = { entry: './entry.js', output: { path: __dirname, filename: 'bundle.js' }, module: { loaders: [ {test: /\\.css$/, loader: 'style-loader!css-loader'} ] } } Bingo again!\n插件 一般在配置文件 plugins 选项中指定\nwebpack 内置一些常用插件，还可通过 npm 安装第三方插件\n实例 内置插件 BannerPlugin：给输出的文件头部添加注释\nwebpack.config.js\nvar webpack = require('webpack') module.exports = { entry: './entry.js', output: { path: __dirname, filename: 'bundle.js' }, module: { loaders: [ {test: /\\.css$/, loader: 'style-loader!css-loader'} ] }, plugins: [ new webpack.BannerPlugin('This file is created by igam') ] } 在 bundle.js 文件头可看见效果\n开发环境 编译时间长，可以通过参数让编译输出内容带有进度和颜色\nwebpack --progress --colors 若不想每次修改模块后重新编译，可启动监听模式\n开启后，没有变化的模块会在编译后缓存到内存中，而非每次重新编译\nwebpack --progress --colors --watch 更好选择 使用 webpack-dev-server 开发服务\n将在 localhost:8080 启动一个 express 静态资源服务器\n以监听模式自动运行 webpack\n访问 http://localhost:8080/或 http://localhost:8080/webpack-dev-server/可浏览项目中的页面和编译后的资源输出，并通过一个 socket.io 服务实时监听变化并自动刷新\n安装 npm install webpack-dev-server -g 运行 webpack -dev-server --progress --colors 故障处理 可通过参数–display-error-deatils 打印错误详情\nwebpack 的配置提供了 resovle 和 resolveLoader 参数设置模块解析的处理细节\nresolve 配置应用层模块（被打包的模块）解析\nresolveLoader 配置 loader 模块的解析\n当引入通过 npm 安装的 node.js 模块时，可能出现找不到依赖的错误\nNode.js 模块的依赖解析算法是通过查看模块的每一层父目录中的 node-modules 文件夹来查询依赖\n当出现 Node.js 模块依赖查找失败时可尝试设置 resolve.fallback 和 resolveLoader.fallback 解决问题\nmodule.exports = { resolve: { fallback: path.join(__dirname, \"node_modules\") }, resolveLoader: { fallback: path.join(__dirname, \"node_modules\") } } webpack 中设计路径配置最好使用绝对路径，建议使用 path.resolve(**dirname, “app/folder”)或 path.join(**dirname, “app”, “folder”)方式配置，以兼容 Windows 环境\n参考： http://zhaoda.net/webpack-handbook/index.html\n","wordCount":"582","inLanguage":"zh","datePublished":"2018-01-17T11:41:10Z","dateModified":"2018-01-17T11:41:10Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://barnett617.github.io/wilson-blog/posts/2018-01-17-webpack-basic/"},"publisher":{"@type":"Organization","name":"Wilson's Blog","logo":{"@type":"ImageObject","url":"https://barnett617.github.io/wilson-blog/favicon_io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://barnett617.github.io/wilson-blog/ accesskey=h title="Wilson's Blog (Alt + H)"><img src=https://barnett617.github.io/wilson-blog/favicon_io/apple-touch-icon.png alt aria-label=logo height=35>Wilson's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://barnett617.github.io/wilson-blog/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://barnett617.github.io/wilson-blog/archives title=时间线><span>时间线</span></a></li><li><a href=https://barnett617.github.io/wilson-blog/search/ title=搜索><span>搜索</span></a></li><li><a href=https://barnett617.github.io/wilson-blog/tags/ title=标签分类><span>标签分类</span></a></li><li><a href=https://barnett617.github.io/wilson-blog/about/ title=关于我><span>关于我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>webpack学习笔记</h1><div class=post-meta><span title='2018-01-17 11:41:10 +0000 UTC'>2018-01-17 11:41:10</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;582 字&nbsp;|&nbsp;<a href=https://github.com/barnett617/wilson-blog/tree/main/content//posts/2018-01-17-webpack-basic.md rel="noopener noreferrer" target=_blank>修改建议</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#背景>背景</a></li><li><a href=#传统方式>传统方式</a></li><li><a href=#commonjs>CommonJS</a></li><li><a href=#es6-模块>ES6 模块</a></li><li><a href=#静态分析>静态分析</a></li><li><a href=#webpack-概念>Webpack 概念</a></li><li><a href=#现有模块化工具无法实现>现有模块化工具无法实现</a></li><li><a href=#webpack-特点>Webpack 特点</a></li><li><a href=#安装>安装</a></li><li><a href=#使用>使用</a></li><li><a href=#loader-1>loader</a></li><li><a href=#配置文件>配置文件</a></li><li><a href=#插件>插件</a></li><li><a href=#开发环境>开发环境</a></li><li><a href=#故障处理>故障处理</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>关于 Webpack 基础使用的整理</p><h3 id=背景>背景<a hidden class=anchor aria-hidden=true href=#背景>#</a></h3><ul><li><p>网站由网页模式进化成 Webapp 模式</p></li><li><p>网站运行在高级浏览器中，使用 HTML5、CSS3、ES6 等新技术</p></li><li><p>webapp 通常是单页面应用（每一个视图通过异步方式加载，导致页面初始化和使用过程会加载更多的 js 代码）</p></li><li><p>前端开发基于多语言、多层次编码和组织工作，交付基于浏览器，需要保证代码和资源在浏览器端快速优雅的加载和更新，亟需<strong>模块化系统</strong></p></li></ul><h3 id=传统方式>传统方式<a hidden class=anchor aria-hidden=true href=#传统方式>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;script src=&#34;module1.js&#34;&gt;&lt;/scrpti&gt;
</span></span><span class=line><span class=cl>&lt;script src=&#34;module2.js&#34;&gt;&lt;/scrpti&gt;
</span></span><span class=line><span class=cl>&lt;script src=&#34;module3.js&#34;&gt;&lt;/scrpti&gt;
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><h4 id=弊端>弊端<a hidden class=anchor aria-hidden=true href=#弊端>#</a></h4><ul><li><p>全局作用域（定义在 window 对象下）下易造成变量冲突</p></li><li><p>文件只能按照脚本引入的顺序加载</p></li><li><p>需要主观解决模块和代码库的依赖关系</p></li><li><p>大型项目中资源难以管理，长期积累导致代码库混乱不堪</p></li></ul><h3 id=commonjs>CommonJS<a hidden class=anchor aria-hidden=true href=#commonjs>#</a></h3><p>服务端的 Node.js 遵循 CommonJS 规范</p><h4 id=核心思想>核心思想<a hidden class=anchor aria-hidden=true href=#核心思想>#</a></h4><ol><li>允许模块通过 require 方法来<strong>同步加载</strong>要依赖的其他模块</li><li>通过 exports 或 module.exports 导出需要暴露的接口</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>require</span><span class=p>(</span><span class=s2>&#34;module&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>require</span><span class=p>(</span><span class=s2>&#34;../file.js&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>exports</span><span class=o>.</span><span class=n>doStuff</span> <span class=o>=</span> <span class=n>function</span><span class=p>()</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=n>module</span><span class=o>.</span><span class=n>exports</span> <span class=o>=</span> <span class=n>someValue</span><span class=p>;</span>
</span></span></code></pre></div><h4 id=优势>优势<a hidden class=anchor aria-hidden=true href=#优势>#</a></h4><ul><li><p>服务端模块便于重用</p></li><li><p>NPM 中已有大量可用模块包（20w）</p></li><li><p>简单易用</p></li></ul><h4 id=缺陷>缺陷<a hidden class=anchor aria-hidden=true href=#缺陷>#</a></h4><ul><li><p>同步的模块加载方式不适合在浏览器环境中，同步意味着阻塞加载，浏览器资源是异步加载的</p></li><li><p>不能非阻塞的并行加载多个模块</p></li></ul><h3 id=es6-模块>ES6 模块<a hidden class=anchor aria-hidden=true href=#es6-模块>#</a></h3><p>ES6 标准增加了 js 语言层面的模块体系定义</p><p>ES6 的设计思想是尽量的<strong>静态化</strong>，使得编译时就能确定模块的依赖关系，以及输入和输出的变量。</p><h4 id=优势-1>优势<a hidden class=anchor aria-hidden=true href=#优势-1>#</a></h4><ul><li><p>易于进行静态分析</p></li><li><p>面向未来 ES 标准</p></li></ul><h4 id=缺陷-1>缺陷<a hidden class=anchor aria-hidden=true href=#缺陷-1>#</a></h4><ul><li><p>原生浏览器未实现该标准</p></li><li><p>全新命令字，新版 Node.js 才支持</p></li></ul><h3 id=静态分析>静态分析<a hidden class=anchor aria-hidden=true href=#静态分析>#</a></h3><p>编译时对整个代码进行静态分析，分析出各模块的<strong>类型</strong>和<strong>依赖关系</strong>，将不同类型的模块交由相应的加载器处理。</p><h3 id=webpack-概念>Webpack 概念<a hidden class=anchor aria-hidden=true href=#webpack-概念>#</a></h3><p>Webpack 是一个模块打包器。</p><p>根据模块的依赖关系进行静态分析，然后将模块按照指定的规则生成对应的静态资源</p><h3 id=现有模块化工具无法实现>现有模块化工具无法实现<a hidden class=anchor aria-hidden=true href=#现有模块化工具无法实现>#</a></h3><ul><li><p>将依赖树拆分成按需加载的块</p></li><li><p>初始化加载的耗时尽量少</p></li><li><p>各种静态资源都可视作模块</p></li><li><p>将第三方库整合成模块</p></li><li><p>自定义打包逻辑</p></li><li><p>适合无论单页或多页的 Web 应用大项目</p></li></ul><h3 id=webpack-特点>Webpack 特点<a hidden class=anchor aria-hidden=true href=#webpack-特点>#</a></h3><ul><li><p>代码拆分</p></li><li><p>Loader</p></li><li><p>智能解析</p></li><li><p>插件系统</p></li><li><p>快速运行</p></li></ul><h4 id=代码拆分>代码拆分<a hidden class=anchor aria-hidden=true href=#代码拆分>#</a></h4><ul><li><p>两种组织模块依赖的方式：同步、异步、</p></li><li><p>异步依赖作为分割点，形成新的块</p></li><li><p>优化了依赖树后，每一个异步区块都作为一个文件被打包</p></li></ul><h4 id=loader>Loader<a hidden class=anchor aria-hidden=true href=#loader>#</a></h4><ul><li><p>Webpack 本身只能处理原生 js 模块</p></li><li><p>loader 转换器可将各种类型的资源转换成 js 模块</p></li></ul><h4 id=智能解析>智能解析<a hidden class=anchor aria-hidden=true href=#智能解析>#</a></h4><p>Webpack 有一个智能解析器，几乎可以处理任何第三方库</p><p>无论模块形式是 CommonJS 或是普通 js 文件</p><p>加载依赖时甚至允许动态表达式</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>require(&#34;./templates/&#34; + name + &#34;.jade&#34;)
</span></span></code></pre></div><h4 id=插件系统>插件系统<a hidden class=anchor aria-hidden=true href=#插件系统>#</a></h4><p>Webpack 有一个功能丰富的插件系统</p><p>可开发和使用开源插件满足各式需求</p><h4 id=快速运行>快速运行<a hidden class=anchor aria-hidden=true href=#快速运行>#</a></h4><p>Webpack 使用异步 I/O 和多级缓存提高运行效率</p><h3 id=安装>安装<a hidden class=anchor aria-hidden=true href=#安装>#</a></h3><p>Webpack 需要 Node.js v0.6 以上支持</p><p>使用 npm 全局安装</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>npm install webpack -g
</span></span></code></pre></div><p>将 Webpack 安装到项目的依赖中</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>npm install webpack --save-dev
</span></span></code></pre></div><h3 id=使用>使用<a hidden class=anchor aria-hidden=true href=#使用>#</a></h3><p>index.html</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;html&gt;
</span></span><span class=line><span class=cl>&lt;head&gt;
</span></span><span class=line><span class=cl>	&lt;meta charset=&#34;utf-8&#34;&gt;
</span></span><span class=line><span class=cl>&lt;/head&gt;
</span></span><span class=line><span class=cl>&lt;body&gt;
</span></span><span class=line><span class=cl>	&lt;scritp src=&#34;bundle.js&#34;&gt;&lt;/script&gt;
</span></span><span class=line><span class=cl>&lt;/body&gt;
</span></span><span class=line><span class=cl>&lt;/html&gt;
</span></span></code></pre></div><p>entry.js</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>document.write(&#39;Hello world&#39;)
</span></span></code></pre></div><p>编译 entry.js 并打包到 bundle.js</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>webpack entry.js bundle.js
</span></span></code></pre></div><p>访问 index.html 即可</p><h4 id=添加模块>添加模块<a hidden class=anchor aria-hidden=true href=#添加模块>#</a></h4><p>module.js</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>module</span><span class=o>.</span><span class=n>exports</span> <span class=o>=</span> <span class=s1>&#39;It works from module.js.&#39;</span>
</span></span></code></pre></div><p>entry.js</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>document.write(&#39;Hello world&#39;)
</span></span><span class=line><span class=cl>document.write(require(&#39;./module.js&#39;))
</span></span></code></pre></div><p>打包</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>webpack entry.js bundle.js
</span></span></code></pre></div><h4 id=分析>分析<a hidden class=anchor aria-hidden=true href=#分析>#</a></h4><p>webpack 分析入口文件，解析包含依赖关系的各个文件</p><p>这些文件（模块）都打包到 bundle.js</p><p>webpack 给每个模块分配一个唯一 ID 并通过 ID 索引和访问模块</p><p>页面启动时先执行 entry.js，其他模块在运行 require 时再执行</p><h3 id=loader-1>loader<a hidden class=anchor aria-hidden=true href=#loader-1>#</a></h3><h4 id=背景-1>背景<a hidden class=anchor aria-hidden=true href=#背景-1>#</a></h4><p>webpack 本身只能处理 js 模块，其他类型文件需要 loader 进行转换</p><p>loader 本身一个函数，接受源文件为参数，返回转换结果</p><h4 id=loader-特性>loader 特性<a hidden class=anchor aria-hidden=true href=#loader-特性>#</a></h4><ul><li><p>可通过管道方式链式调用，每个 loader 可将资源转换成任意格式并传递给下一个 loader，最后一个 loader 必须返回 js</p></li><li><p>可同步或异步执行</p></li><li><p>运行在 node.js 环境中，可做任何可能的事情</p></li><li><p>可接受参数，以此传递配置给 loader</p></li><li><p>可通过文件拓展名（或正则表达式）绑定给不同类型的文件</p></li><li><p>可通过 npm 发布和安装</p></li><li><p>除了通过 package.json 和 main 指定，通常的模块也可导出一个 loader 来使用</p></li><li><p>可访问配置</p></li><li><p>支持插件</p></li><li><p>可分发出附件的任意文件</p></li></ul><h4 id=loader-命名>loader 命名<a hidden class=anchor aria-hidden=true href=#loader-命名>#</a></h4><p>一般为 xxx-loader，xxx 为转换的功能，例如 json-loader</p><p>引用 loader 时可通过全名（json-loader）或短名(json)</p><p>命名规则和搜索优先级顺序在 resolveLoader.moduleTemplates API 中定义</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>Default</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;*-webpack-loader&#34;</span><span class=p>,</span> <span class=s2>&#34;*-web-loader&#34;</span><span class=p>,</span> <span class=s2>&#34;*-loader&#34;</span><span class=p>,</span> <span class=s2>&#34;*&#34;</span><span class=p>]</span>
</span></span></code></pre></div><h4 id=添加方式>添加方式<a hidden class=anchor aria-hidden=true href=#添加方式>#</a></h4><ul><li><p>在 require()引用模块时添加</p></li><li><p>webpack 全局配置中绑定</p></li><li><p>命令行方式</p></li></ul><h4 id=场景>场景<a hidden class=anchor aria-hidden=true href=#场景>#</a></h4><p>在页面引入一个 CSS 文件 style.css</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>body { background: yellow; }
</span></span></code></pre></div><p>entry.js</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=err>载入</span><span class=n>style</span><span class=o>.</span><span class=n>css</span>
</span></span><span class=line><span class=cl><span class=n>require</span><span class=p>(</span><span class=s2>&#34;!style-loader!css-loader!./style.css&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>document</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>&#39;Hello world.&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>document</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>require</span><span class=p>(</span><span class=s1>&#39;./module.js&#39;</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=处理>处理<a hidden class=anchor aria-hidden=true href=#处理>#</a></h4><p>将 style.css 看作一个模块</p><p>用 css-loader 读取</p><p>用 style-loader 把它插入页面</p><h4 id=安装-loader>安装 loader<a hidden class=anchor aria-hidden=true href=#安装-loader>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>npm</span> <span class=n>install</span> <span class=n>css</span><span class=o>-</span><span class=n>loader</span> <span class=n>style</span><span class=o>-</span><span class=n>loader</span>
</span></span></code></pre></div><p>即可</p><h4 id=改进>改进<a hidden class=anchor aria-hidden=true href=#改进>#</a></h4><p>根据模块类型（拓展名）自动绑定需要的 loader，避免每次 require CSS 文件时都写 loader 前缀</p><p>entry.js</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>require(&#34;!style!css!./style.css&#34;)
</span></span></code></pre></div><p>修改为</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>require(&#34;./style.css&#34;)
</span></span></code></pre></div><h4 id=打包>打包<a hidden class=anchor aria-hidden=true href=#打包>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>webpack</span> <span class=n>entry</span><span class=o>.</span><span class=n>js</span> <span class=n>bundle</span><span class=o>.</span><span class=n>js</span> <span class=o>--</span><span class=n>module</span><span class=o>-</span><span class=n>bind</span> <span class=s2>&#34;css=style-loader!css-loader&#34;</span>
</span></span></code></pre></div><p>Bingo! 效果一样</p><p>只不过是在打包环节根据模块类型绑定需要的 loader，不需要在 require 中写 loader 前缀</p><h3 id=配置文件>配置文件<a hidden class=anchor aria-hidden=true href=#配置文件>#</a></h3><p>上面通过在命令行在执行 webpack 时传入参数，可通过指定配置文件来执行</p><p>默认搜索当前目录 webpack.config.js</p><p>该文件是一个 node.js 模块，返回一个 json 格式的配置信息对象</p><p>可通过&ndash;config 选项指定配置文件</p><h4 id=具体操作>具体操作<a hidden class=anchor aria-hidden=true href=#具体操作>#</a></h4><p>创建 package.json 添加 webpack 需要的依赖</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;my-webpack&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;A simple webpack example&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;main&#34;</span><span class=p>:</span> <span class=s2>&#34;bundle.js&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;test&#34;</span><span class=p>:</span> <span class=s2>&#34;echo </span><span class=se>\&#34;</span><span class=s2>Error: no test specified</span><span class=se>\&#34;</span><span class=s2> &amp;&amp; exit 1&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;keywords&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;webpack&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>],</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;igam&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;license&#34;</span><span class=p>:</span> <span class=s2>&#34;MIT&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;devDependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;css-loader&#34;</span><span class=p>:</span> <span class=s2>&#34;^0.21.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;style-loader&#34;</span><span class=p>:</span> <span class=s2>&#34;^0.13.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;webpack&#34;</span><span class=p>:</span> <span class=s2>&#34;^1.12.2&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>根据 package.json 下载依赖模块</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>npm install
</span></span></code></pre></div><p>创建配置文件 webpack.config.js</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>var</span> <span class=n>webpack</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s1>&#39;webpack&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>module</span><span class=o>.</span><span class=n>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>entry</span><span class=p>:</span> <span class=s1>&#39;./entry.js&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=n>output</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>path</span><span class=p>:</span> <span class=n>__dirname</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=n>filename</span><span class=p>:</span> <span class=s1>&#39;bundle.js&#39;</span>
</span></span><span class=line><span class=cl>	<span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=n>module</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>loaders</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span><span class=n>test</span><span class=p>:</span> <span class=o>/</span>\<span class=o>.</span><span class=n>css</span><span class=o>$/</span><span class=p>,</span> <span class=n>loader</span><span class=p>:</span> <span class=s1>&#39;style-loader!css-loader&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Bingo again!</p><h3 id=插件>插件<a hidden class=anchor aria-hidden=true href=#插件>#</a></h3><p>一般在配置文件 plugins 选项中指定</p><p>webpack 内置一些常用插件，还可通过 npm 安装第三方插件</p><h4 id=实例>实例<a hidden class=anchor aria-hidden=true href=#实例>#</a></h4><p>内置插件 BannerPlugin：给输出的文件头部添加注释</p><p>webpack.config.js</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>var</span> <span class=n>webpack</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s1>&#39;webpack&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>module</span><span class=o>.</span><span class=n>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>entry</span><span class=p>:</span> <span class=s1>&#39;./entry.js&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=n>output</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>path</span><span class=p>:</span> <span class=n>__dirname</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=n>filename</span><span class=p>:</span> <span class=s1>&#39;bundle.js&#39;</span>
</span></span><span class=line><span class=cl>	<span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=n>module</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>loaders</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span><span class=n>test</span><span class=p>:</span> <span class=o>/</span>\<span class=o>.</span><span class=n>css</span><span class=o>$/</span><span class=p>,</span> <span class=n>loader</span><span class=p>:</span> <span class=s1>&#39;style-loader!css-loader&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=n>plugins</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>		<span class=n>new</span> <span class=n>webpack</span><span class=o>.</span><span class=n>BannerPlugin</span><span class=p>(</span><span class=s1>&#39;This file is created by igam&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>在 bundle.js 文件头可看见效果</p><h3 id=开发环境>开发环境<a hidden class=anchor aria-hidden=true href=#开发环境>#</a></h3><p>编译时间长，可以通过参数让编译输出内容带有<strong>进度</strong>和<strong>颜色</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>webpack --progress --colors
</span></span></code></pre></div><p>若不想每次修改模块后重新编译，可启动<strong>监听模式</strong></p><p>开启后，没有变化的模块会在编译后缓存到内存中，而非每次重新编译</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>webpack --progress --colors --watch
</span></span></code></pre></div><h4 id=更好选择>更好选择<a hidden class=anchor aria-hidden=true href=#更好选择>#</a></h4><p>使用 webpack-dev-server 开发服务</p><p>将在 localhost:8080 启动一个 express 静态资源服务器</p><p>以监听模式自动运行 webpack</p><p>访问 http://localhost:8080/或 http://localhost:8080/webpack-dev-server/可浏览项目中的页面和编译后的资源输出，并通过一个 socket.io 服务实时监听变化并自动刷新</p><h4 id=安装-1>安装<a hidden class=anchor aria-hidden=true href=#安装-1>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>npm install webpack-dev-server -g
</span></span></code></pre></div><h4 id=运行>运行<a hidden class=anchor aria-hidden=true href=#运行>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>webpack -dev-server --progress --colors
</span></span></code></pre></div><h3 id=故障处理>故障处理<a hidden class=anchor aria-hidden=true href=#故障处理>#</a></h3><p>可通过参数&ndash;display-error-deatils 打印错误详情</p><p>webpack 的配置提供了 resovle 和 resolveLoader 参数设置模块解析的处理细节</p><p>resolve 配置应用层模块（被打包的模块）解析</p><p>resolveLoader 配置 loader 模块的解析</p><blockquote><p>当引入通过 npm 安装的 node.js 模块时，可能出现找不到依赖的错误</p></blockquote><p>Node.js 模块的依赖解析算法是通过查看模块的每一层父目录中的 node-modules 文件夹来查询依赖</p><p>当出现 Node.js 模块依赖查找失败时可尝试设置 resolve.fallback 和 resolveLoader.fallback 解决问题</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>module</span><span class=o>.</span><span class=n>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>resolve</span><span class=p>:</span> <span class=p>{</span> <span class=n>fallback</span><span class=p>:</span> <span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>__dirname</span><span class=p>,</span> <span class=s2>&#34;node_modules&#34;</span><span class=p>)</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=n>resolveLoader</span><span class=p>:</span> <span class=p>{</span> <span class=n>fallback</span><span class=p>:</span> <span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>__dirname</span><span class=p>,</span> <span class=s2>&#34;node_modules&#34;</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>webpack 中设计路径配置最好使用绝对路径，建议使用 path.resolve(**dirname, &ldquo;app/folder&rdquo;)或 path.join(**dirname, &ldquo;app&rdquo;, &ldquo;folder&rdquo;)方式配置，以兼容 Windows 环境</p><p>参考： <a href=http://zhaoda.net/webpack-handbook/index.html>http://zhaoda.net/webpack-handbook/index.html</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://barnett617.github.io/wilson-blog/tags/webpack/>webpack</a></li></ul><nav class=paginav><a class=prev href=https://barnett617.github.io/wilson-blog/posts/2018-01-18-how-bitcorn-works-translation/><span class=title>« 上一页</span><br><span>比特币协议是如何工作的（译）</span>
</a><a class=next href=https://barnett617.github.io/wilson-blog/posts/2018-01-16-api-designing-translation/><span class=title>下一页 »</span><br><span>如何设计良好的API并且为什么这很重要（译）</span></a></nav><script defer crossorigin=anonymous src=/wilson-blog/assets/js/qrcode.a817fc490b9066afefa35cf981f6f003a76441b45cc519492334607a8cbcb264.js integrity="sha256-qBf8SQuQZq/vo1z5gfbwA6dkQbRcxRlJIzRgeoy8smQ=" onload='const wechatShareBtnFingerprint=document.getElementById("wechat-share-btn");if(wechatShareBtnFingerprint){wechatShareBtnFingerprint.style.position="relative";const e=document.createElement("div");e.id="qrcode",Object.assign(e.style,{position:"absolute",background:"#fff",padding:"8px",bottom:0,"box-sizing":"content-box","box-shadow":"rgba(0, 0, 0, 0.2) 0px 0px 10px 4px",width:"96px",height:"96px",left:"50%",transform:"translate(-50%, -43%)",visibility:"hidden"}),window.wechatShareQrCode=e,wechatShareBtnFingerprint.appendChild(e),new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:128,height:128,colorDark:"#000",colorLight:"#fff",correctLevel:QRCode.CorrectLevel.H})}'></script><div class=share-buttons><a id=wechat-share-btn target=_blank rel="noopener noreferrer" aria-label="share webpack学习笔记 on wechat" href=javascript:void(0) onclick=return!1 onmouseenter='const shareBtns=document.getElementsByClassName("share-buttons")[0];shareBtns&&(shareBtns.style.overflowX="initial"),wechatShareQrCode.style.visibility="visible"' onpointerdown='const shareBtnsPointer=document.getElementsByClassName("share-buttons")[0];shareBtnsPointer&&(shareBtnsPointer.style.overflowX="initial"),wechatShareQrCode.style.visibility="visible"' onmouseleave='wechatShareQrCode.style.visibility="hidden"' onpointerout='wechatShareQrCode.style.visibility="hidden"'><svg role="img" viewBox="0 0 24 24" height="30" width="30" fill="currentcolor"><path d="M8.691 2.188C3.891 2.188.0 5.476.0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59.0 01.213.665l-.39 1.48c-.019.07-.048.141-.048.213.0.163.13.295.29.295a.326.326.0 00.167-.054l1.903-1.114a.864.864.0 01.717-.098 10.16 10.16.0 002.837.403c.276.0.543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 5.853-1.838-.576-3.583-4.196-6.348-8.596-6.348zM5.785 5.991c.642.0 1.162.529 1.162 1.18A1.17 1.17.0 015.785 8.349 1.17 1.17.0 014.623 7.17c0-.651.52-1.18 1.162-1.18zm5.813.0c.642.0 1.162.529 1.162 1.18a1.17 1.17.0 01-1.162 1.178 1.17 1.17.0 01-1.162-1.178c0-.651.52-1.18 1.162-1.18zm5.34 2.867c-1.797-.052-3.746.512-5.28 1.786-1.72 1.428-2.687 3.72-1.78 6.22.942 2.453 3.666 4.229 6.884 4.229.826.0 1.622-.12 2.361-.336a.722.722.0 01.598.082l1.584.926a.272.272.0 00.14.047c.134.0.24-.111.24-.247.0-.06-.023-.12-.038-.177l-.327-1.233a.582.582.0 01-.023-.156.49.49.0 01.201-.398C23.024 18.48 24 16.82 24 14.98c0-3.21-2.931-5.837-6.656-6.088V8.89c-.135-.01-.27-.027-.407-.03zm-2.53 3.274c.535.0.969.44.969.982a.976.976.0 01-.969.983.976.976.0 01-.969-.983c0-.542.434-.982.97-.982zm4.844.0c.535.0.969.44.969.982a.976.976.0 01-.969.983.976.976.0 01-.969-.983c0-.542.434-.982.969-.982z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share webpack学习笔记 on x" href="https://x.com/intent/tweet/?text=webpack%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0&amp;url=https%3a%2f%2fbarnett617.github.io%2fwilson-blog%2fposts%2f2018-01-17-webpack-basic%2f&amp;hashtags=webpack"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://barnett617.github.io/wilson-blog/>Wilson's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>